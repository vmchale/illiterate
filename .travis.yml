---
language: c
addons:
  apt:
    packages:
      - python3-pip
cache:
  directories:
    - $HOME/.atspkg
    - $HOME/.local
install:
  - mkdir -p $HOME/.local/bin
  - pip3 install yamllint --user
  - curl -sSl https://raw.githubusercontent.com/vmchale/atspkg/master/bash/install.sh | bash -s
  - export PATH=$HOME/.local/bin:$PATH
  - atspkg -V
script:
  - yamllint .travis.yml
  - yamllint .yamllint
  - curl -sL https://raw.githubusercontent.com/vmchale/tomlcheck/master/sh/check | sh -s .atsfmt.toml
  - atspkg build
  - ./target/lit test/data/calc.ly
  - ./target/lit test/data/setup.lhs
